import speech_recognition as sr

# –°–æ–∑–¥–∞–µ–º "–£—Ö–æ" (Recognizer)
r = sr.Recognizer()

# –í—ã–±–∏—Ä–∞–µ–º –º–∏–∫—Ä–æ—Ñ–æ–Ω (–æ–±—ã—á–Ω–æ index=0 –∏–ª–∏ 1, –Ω–æ sr.Microphone() —Å–∞–º –Ω–∞–π–¥–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π)
# –ï—Å–ª–∏ –Ω–µ —Å–ª—ã—à–∏—Ç - –ø—Ä–∏–¥–µ—Ç—Å—è –∏—Å–∫–∞—Ç—å –∏–Ω–¥–µ–∫—Å
with sr.Microphone() as source:
    print("üé§ –°–∫–∞–∂–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å... (–Ø —Å–ª—É—à–∞—é)")
    
    # –®—É–º–æ–ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ (—Å–ª—É—à–∞–µ—Ç —Ç–∏—à–∏–Ω—É 1 —Å–µ–∫—É–Ω–¥—É, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —É—Ä–æ–≤–µ–Ω—å —à—É–º–∞)
    r.adjust_for_ambient_noise(source, duration=1)
    
    try:
        # –°–ª—É—à–∞–µ–º (–º–∞–∫—Å–∏–º—É–º 5 —Å–µ–∫—É–Ω–¥)
        audio = r.listen(source, timeout=5)
        print("‚è≥ –î—É–º–∞—é...")
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Google (–Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç!)
        # language="ru-RU" - —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞–ª —Ä—É—Å—Å–∫–∏–π
        text = r.recognize_google(audio, language="ru-RU")
        
        print(f"üó£Ô∏è –¢—ã —Å–∫–∞–∑–∞–ª: {text}")
        
        if "–ø—Ä–∏–≤–µ—Ç" in text.lower():
            print("üëã –ü—Ä–∏–≤–µ—Ç, —Ö–æ–∑—è–∏–Ω!")
            
    except sr.WaitTimeoutError:
        print("‚ùå –¢—ã –º–æ–ª—á–∞–ª —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ.")
    except sr.UnknownValueError:
        print("‚ùå –Ø –Ω–µ –ø–æ–Ω—è–ª, —á—Ç–æ —Ç—ã —Å–∫–∞–∑–∞–ª (—à—É–º –∏–ª–∏ –Ω–µ—Ä–∞–∑–±–æ—Ä—á–∏–≤–æ).")
    except sr.RequestError:
        print("‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞).")